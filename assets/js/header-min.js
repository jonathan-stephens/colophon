class HeaderController{constructor(){this.isNavOpen=!1,this.isTransitioning=!1,this.transitionDuration=300,this.navToggle=document.getElementById("nav-toggle"),this.navPanel=document.getElementById("nav-panel"),this.navToggleText=document.getElementById("nav-toggle-text"),this.body=document.body,this.openIcon=null,this.closeIcon=null,this.init()}init(){this.loadIcons().then((()=>{this.setupInitialState(),this.bindEvents()}))}loadIcons(){return Promise.all([fetch("/assets/svg/icons/panel-right---to-open.svg"),fetch("/assets/svg/icons/panel-right---to-close.svg")]).then((([t,e])=>Promise.all([t.text(),e.text()]))).then((([t,e])=>{this.openIcon=t,this.closeIcon=e})).catch((()=>{const t=this.navToggle&&this.navToggle.querySelector("svg");this.openIcon=t&&t.outerHTML||"",this.closeIcon=this.openIcon}))}setupInitialState(){this.navPanel&&(this.navPanel.classList.add("is-collapsed"),this.navPanel.setAttribute("aria-hidden","true"))}bindEvents(){this.navToggle&&this.navToggle.addEventListener("click",(t=>{t.preventDefault(),this.toggleNav()})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.isNavOpen&&this.closeNav()}))}toggleNav(){this.isTransitioning||(this.isNavOpen?this.closeNav():this.openNav())}openNav(){this.isTransitioning||(this.isNavOpen=!0,this.isTransitioning=!0,this.body.style.overflow="hidden",this.navPanel&&(this.navPanel.classList.remove("is-collapsed"),this.navPanel.classList.add("is-opening")),this.updateNavState(),this.scheduleTransitionEnd((()=>{this.navPanel&&this.navPanel.classList.remove("is-opening"),this.navPanel&&this.navPanel.classList.add("open")})))}closeNav(){this.isNavOpen&&!this.isTransitioning&&(this.isNavOpen=!1,this.isTransitioning=!0,this.body.style.overflow="",this.navPanel&&(this.navPanel.classList.remove("is-opening","open"),this.navPanel.classList.add("is-closing")),this.updateNavState(),this.scheduleTransitionEnd((()=>{this.navPanel&&this.navPanel.classList.remove("is-closing"),this.navPanel&&this.navPanel.classList.add("is-collapsed")})))}scheduleTransitionEnd(t){setTimeout((()=>{this.isTransitioning=!1,t()}),this.transitionDuration)}updateNavState(){this.navPanel&&this.navPanel.setAttribute("aria-hidden",(!this.isNavOpen).toString()),this.navToggle&&(this.navToggle.setAttribute("aria-expanded",this.isNavOpen.toString()),this.navToggle.classList.toggle("is-open",this.isNavOpen)),this.navToggleText&&(this.navToggleText.textContent=this.isNavOpen?"Close Navigation":"Open Navigation"),this.updateIcon()}updateIcon(){if(!this.openIcon||!this.closeIcon)return;const t=this.navToggle&&this.navToggle.querySelector("svg");if(!t)return;const e=this.isNavOpen?this.closeIcon:this.openIcon,s=document.createElement("div");s.innerHTML=e;const n=s.querySelector("svg");n&&(t.className.baseVal&&n.setAttribute("class",t.className.baseVal),t.replaceWith(n))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>new HeaderController)):new HeaderController;