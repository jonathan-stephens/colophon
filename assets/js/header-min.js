class HeaderController{constructor(){this.isNavOpen=!1,this.isTransitioning=!1,this.scrollPosition=0,this.navToggle=document.getElementById("nav-toggle"),this.navPanel=document.getElementById("nav-panel"),this.navToggleText=document.getElementById("nav-toggle-text"),this.body=document.body,this.html=document.documentElement,this.openIcon=null,this.closeIcon=null,this.isMobile=this.detectMobile(),this.handleResize=this.debounce(this.handleResize.bind(this),150),this.init()}detectMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768}debounce(t,e){let i;return function(...s){clearTimeout(i),i=setTimeout((()=>{clearTimeout(i),t(...s)}),e)}}async init(){await this.loadIcons(),this.navPanel.classList.add("is-collapsed"),this.navPanel.setAttribute("aria-hidden","true"),requestAnimationFrame((()=>{this.navPanel.classList.add("transitions-enabled")})),this.navToggle&&this.navToggle.addEventListener("click",(t=>{t.preventDefault(),this.toggleNav()})),this.navPanel&&this.navPanel.addEventListener("transitionend",(t=>{t.target===this.navPanel&&"transform"===t.propertyName&&this.handleTransitionEnd()})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.isNavOpen&&this.closeNav()})),document.addEventListener("click",(t=>{this.isNavOpen&&!this.isTransitioning&&(this.navPanel.contains(t.target)||t.target.closest(".site-header")||this.closeNav())})),window.addEventListener("resize",this.handleResize),this.isMobile&&window.addEventListener("orientationchange",(()=>{setTimeout((()=>{this.handleResize()}),100)})),document.addEventListener("visibilitychange",(()=>{document.hidden&&this.isNavOpen&&this.closeNav()})),this.isMobile&&this.preloadAnimations()}preloadAnimations(){requestAnimationFrame((()=>{this.navPanel.style.transform="translateX(-100%) translateZ(0)"}))}handleResize(){this.isMobile=this.detectMobile(),this.isNavOpen&&!this.isMobile&&this.closeNav()}async loadIcons(){try{const t=await fetch("/assets/svg/icons/panel-left---to-open.svg");this.openIcon=await t.text();const e=await fetch("/assets/svg/icons/panel-left---to-close.svg");this.closeIcon=await e.text()}catch(t){console.warn("Could not load navigation icons:",t);const e=this.navToggle.querySelector("svg");this.openIcon=e?e.outerHTML:"",this.closeIcon=this.openIcon}}toggleNav(){this.isTransitioning||(this.isNavOpen?this.closeNav():this.openNav())}openNav(){this.isTransitioning||(this.isNavOpen=!0,this.isTransitioning=!0,this.scrollPosition=window.pageYOffset,this.preventBodyScroll(),this.navPanel.classList.remove("is-collapsed"),this.navPanel.offsetHeight,this.navPanel.classList.add("is-opening"),this.updateNavState())}closeNav(){this.isNavOpen&&(this.isTransitioning||(this.isNavOpen=!1,this.isTransitioning=!0,this.navPanel.classList.remove("is-opening","open"),this.navPanel.classList.add("is-closing"),this.updateNavState(),this.restoreBodyScroll()))}preventBodyScroll(){this.body.classList.add("nav-open"),this.isMobile&&(this.body.style.position="fixed",this.body.style.top=`-${this.scrollPosition}px`,this.body.style.width="100%")}restoreBodyScroll(){this.body.classList.remove("nav-open"),this.isMobile&&(this.body.style.position="",this.body.style.top="",this.body.style.width="",window.scrollTo(0,this.scrollPosition))}handleTransitionEnd(){this.isTransitioning=!1,this.isNavOpen?(this.navPanel.classList.remove("is-opening"),this.navPanel.classList.add("open")):(this.navPanel.classList.remove("is-closing","open"),this.navPanel.classList.add("is-collapsed"))}updateNavState(){this.navPanel.setAttribute("aria-hidden",(!this.isNavOpen).toString()),this.navToggle.setAttribute("aria-expanded",this.isNavOpen.toString()),this.navToggleText.textContent=this.isNavOpen?"Close Navigation":"Open Navigation",this.updateIcon(),this.navToggle.classList.toggle("is-open",this.isNavOpen),this.isNavOpen&&this.manageFocus()}updateIcon(){if(!this.openIcon||!this.closeIcon)return;const t=this.navToggle.querySelector("svg");if(!t)return;const e=this.isNavOpen?this.closeIcon:this.openIcon,i=document.createElement("div");i.innerHTML=e;const s=i.querySelector("svg");s&&(s.className=t.className,t.replaceWith(s))}manageFocus(){this.isNavOpen&&setTimeout((()=>{const t=this.navPanel.querySelector(".nav-link");t&&t.focus()}),100)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{new HeaderController})):new HeaderController;
//# sourceMappingURL=header-min.js.map