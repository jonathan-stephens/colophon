!function(){"use strict";function e(t,o=0){if(!t.length)return"";let n=0===o?"":`<ol class="toc-list toc-nestlvl-${o}">`;if(0===o)for(const l of t)n+=`<li class="toc-item toc-level-${l.level}">`,n+=`<a href="#${l.id}" class="toc-link" data-level="${l.level}">${l.text.replace(/[<>&"']/g,(e=>({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"}[e])))}</a>`,l.children.length&&(n+=e(l.children,o+1)),n+="</li>";else{for(const l of t)n+=`<li class="toc-item toc-level-${l.level}">`,n+=`<a href="#${l.id}" class="toc-link" data-level="${l.level}">${l.text.replace(/[<>&"']/g,(e=>({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"}[e])))}</a>`,l.children.length&&(n+=e(l.children,o+1)),n+="</li>";n+="</ol>"}return n}function t(t){const o=JSON.parse(t.dataset.tocConfig),n=document.getElementById(t.id+"-content"),l=document.querySelector(o.mainSelector);if(!n||!l)return void console.warn("TOC: Missing elements for",t.id);const c=Array.from({length:o.maxLevel-o.minLevel+1},((e,t)=>`h${o.minLevel+t}`)).join(",");let r=[...l.querySelectorAll(c)];if(o.exclude?.length&&(r=r.filter((e=>!o.exclude.some((t=>{try{return e.matches(t)||e.closest(t)||e.querySelector(t)}catch{return console.warn("TOC: Invalid selector:",t),!1}}))))),!r.length)return void t.classList.add("hidden");const i=new Set;for(const e of r){if(e.id){i.add(e.id);continue}let t=e.textContent.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||"heading",o=t,n=1;for(;i.has(o)||document.getElementById(o);)o=`${t}-${n++}`;e.id=o,i.add(o)}const s=function(e){const t=[],o=[];for(const n of e){const e=+n.tagName[1],l={element:n,level:e,text:n.textContent.trim(),id:n.id,children:[]};for(;o.length&&o[o.length-1].level>=e;)o.pop();(o.length?o[o.length-1].children:t).push(l),o.push(l)}return t}(r);"OL"===n.tagName?(n.className="toc-list toc-nestlvl-0",n.innerHTML=e(s)):n.innerHTML=`<ol class="toc-list toc-nestlvl-0">${e(s)}</ol>`,t.style.display="",function(e,t){if(e.addEventListener("click",(e=>{if(!e.target.matches(".toc-link"))return;e.preventDefault();const t=document.getElementById(e.target.getAttribute("href").slice(1));t&&(window.scrollTo({top:t.getBoundingClientRect().top+window.pageYOffset-20,behavior:"smooth"}),history.replaceState?.(null,null,e.target.getAttribute("href")))})),!window.IntersectionObserver)return;const o=new IntersectionObserver((t=>{for(const o of t){if(!o.isIntersecting)continue;e.querySelectorAll(".toc-link").forEach((e=>e.classList.remove("active")));const t=e.querySelector(`.toc-link[href="#${o.target.id}"]`);t?.classList.add("active")}}),{rootMargin:"-10% 0px -80% 0px"});t.forEach((e=>o.observe(e)))}(t,r)}function o(){document.querySelectorAll(".table-of-contents[data-toc-config]").forEach((e=>{try{t(e)}catch(t){console.error("TOC: Error processing",e.id,t)}})),location.hash&&setTimeout((()=>document.querySelector(location.hash)?.scrollIntoView({behavior:"smooth"})),100)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();